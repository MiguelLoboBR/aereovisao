ğŸ“Œ CORREÃ‡ÃƒO DE REDIRECIONAMENTO DO LOGIN INSTITUCIONAL - MIGUEL LOBO

âš ï¸ Problema:
Ao clicar no botÃ£o de cadeado em /site, o redirecionamento ocorre incorretamente para /auth/login (portal principal),
em vez de carregar a pÃ¡gina institucional /institucional/admin/login.html e seguir com o fluxo correto.

âœ… Objetivo:
Corrigir todo o fluxo do login do painel institucional, de modo que:
- Clique no cadeado leve para /institucional/admin/login.html
- Login redirecione para /institucional/admin/index.html
- NÃ£o haja interferÃªncia do React Router
- O sistema institucional use seu prÃ³prio fluxo de autenticaÃ§Ã£o

ğŸ› ï¸ Etapas para corrigir (jÃ¡ parcialmente feitas, mas deve-se garantir o seguinte):

1. ğŸ“„ institucional/index.html
   âœ… BotÃ£o de cadeado deve usar:
   ```html
   <a href="javascript:void(0)" onclick="window.location.href='/institucional/admin/login.html'">
   ```

2. ğŸ“„ institucional/admin/login.html
   âœ… O formulÃ¡rio deve usar `onsubmit` e apÃ³s sucesso redirecionar com:
   ```js
   window.location.href = window.location.origin + '/institucional/admin/index.html';
   ```

3. ğŸ“„ institucional/public/js/admin-auth.js
   âœ… Atualizar todos os redirecionamentos pÃ³s-login e pÃ³s-logout para:
   ```js
   window.location.href = window.location.origin + '/institucional/admin/index.html';
   ```

4. ğŸ“„ server/institucional-auth.ts
   âœ… Verificar se o endpoint POST /institucional/login estÃ¡ **isolado** do sistema principal
   - Ele deve retornar sucesso apenas para painel institucional
   - Em caso de redirecionamento server-side, usar:
     ```ts
     res.redirect('/institucional/admin/index.html');
     ```

5. ğŸ“„ client/src/App.tsx
   âœ… JÃ¡ possui esta verificaÃ§Ã£o:
   ```tsx
   if (window.location.pathname.startsWith('/institucional')) return null;
   ```
   Isso impede que o React Router interfira. Manter isso.

6. âœ… Banco de dados:
   - Confirmado que usuÃ¡rios do institucional jÃ¡ tÃªm credenciais separadas (ex: ia@aereovisao.com.br).
   - O backend deve verificar no login se Ã© institucional e responder corretamente.

7. âŒ AtenÃ§Ã£o:
   - O React ainda estÃ¡ interceptando o caminho `/institucional/...` em alguns casos.
   - Pode haver conflito com o `react-router` no build final â€” verificar se hÃ¡ algum `<Route path="*">` pegando essas rotas.

8. âœ… Ativar verificaÃ§Ã£o de console:
   - Veja na aba Console do navegador se estÃ¡ tentando redirecionar para `/auth`.
   - Corrigir para que NUNCA acesse /auth ao entrar via institucional.

ğŸ§ª ApÃ³s corrigido, testar:
- Acessar /site
- Clicar no cadeado
- Fazer login com usuÃ¡rio institucional
- Acessar /institucional/admin/index.html
- Logout e novo login devem permanecer no fluxo institucional

ğŸ“ RepositÃ³rio GitHub: MiguelLoboBR/aereovisao
ğŸŒ Hospedagem atual: Replit + Railway