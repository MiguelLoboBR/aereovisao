Excelente diagnÃ³stico, Miguel â€” e vocÃª jÃ¡ acertou **em cheio a origem do erro**!  
Esse `âŒ 500: Unexpected end of form` estÃ¡ ocorrendo justamente porque:

---

## ğŸ§¨ **Erro: Descompasso entre frontend e backend no nome dos campos de upload**

### ğŸ“Œ SituaÃ§Ã£o atual:

| Frontend (`FormData.append`) | Backend (`multer.single`)    | Resultado         |
|------------------------------|-------------------------------|-------------------|
| `'imagemDestacada'`          | `postImageUpload.single('imageFile')`  | âŒ IncompatÃ­vel |
| `'anexo'`                    | `attachmentUpload.single('attachmentFile')` | âŒ IncompatÃ­vel |

---

## âœ… SoluÃ§Ã£o ideal (recomendada)

### ğŸ¯ Atualizar o backend para usar:

```ts
upload.fields([
  { name: 'imagemDestacada', maxCount: 1 },
  { name: 'anexo', maxCount: 1 }
])
```

Assim vocÃª **alinha 100% com o que o frontend jÃ¡ estÃ¡ usando**, evita confusÃµes com mÃºltiplos `.single()` e permite receber **ambos os arquivos em um Ãºnico `FormData`** (o que Ã© exatamente o que vocÃª quer no Replit).

---

## ğŸ”§ CÃ³digo sugerido para corrigir backend (posts.ts):

Substitua:

```ts
postImageUpload.single('imageFile'),
attachmentUpload.single('attachmentFile'),
```

Por:

```ts
import multer from "multer";

const upload = multer({ storage: diskStorage });

upload.fields([
  { name: 'imagemDestacada', maxCount: 1 },
  { name: 'anexo', maxCount: 1 }
]),
```

---

### ğŸ‘‡ E para ler os arquivos:

```ts
const files = req.files as { [fieldname: string]: Express.Multer.File[] };

if (files?.imagemDestacada?.[0]) {
  imagemUrl = getFileUrl(files.imagemDestacada[0].filename);
}
if (files?.anexo?.[0]) {
  anexoUrl = getFileUrl(files.anexo[0].filename);
  anexoNome = files.anexo[0].originalname;
}
```

---

## ğŸ§  Por que nÃ£o Ã© melhor mudar o frontend?

Porque:

- O backend **espera mÃºltiplos arquivos**, mas `.single()` **interrompe o fluxo** se dois forem enviados.
- `FormData` sÃ³ pode ser enviado uma vez â€” logo, o frontend **nÃ£o pode fazer dois envios separados para a mesma requisiÃ§Ã£o.**
- O backend precisa ser **mais flexÃ­vel**, nÃ£o o frontend.

---

### âœ… ConclusÃ£o

ğŸ”§ **Corrija o backend para aceitar `.fields()` com os mesmos nomes do frontend:**

```ts
imagemDestacada â†’ imagemDestacada  
anexo â†’ anexo
```

E o erro `Unexpected end of form` serÃ¡ resolvido.

Se quiser, posso te mandar o trecho `.ts` exato para colar no backend. Deseja?